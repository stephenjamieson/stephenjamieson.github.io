<!doctype html>

<html lang="en-us">
  <head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <base href="https://stephenjamieson.info">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    
    <link href="/post/index.xml" rel="alternate" type="application/rss+xml" title="RSS - Stephen Jamieson" />
    
    <meta property="og:site_name" content="Stephen Jamieson" />
<meta property="og:locale " content="en-us" />

<meta property="og:url" content="https://stephenjamieson.info/post/smokeping-saucy/" />
<meta name="twitter:url" content="https://stephenjamieson.info/post/smokeping-saucy/" />
<link rel="canonical" href="https://stephenjamieson.info/post/smokeping-saucy/" />

<meta name="description" content="this is my description" />
<meta name="twitter:description" content="this is my description">
<meta property="og:description" content="this is my description" />

<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@" />



    <meta property="og:title" content="smokeping on saucy" />
    <meta name="twitter:title" content="smokeping on saucy" />
    <title>smokeping on saucy</title>
    
    
        <meta name="twitter:image" content="images/logo.jpg" />
        <meta property="og:image" content="images/logo.jpg" />
    

    
    
    
    <script type="application/ld+json">
    { 
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "smokeping on saucy",
        "name": "smokeping on saucy",
        "datePublished": "2013-11-26",
        
        "wordCount":  116 ,
        "articleSection": "post",
        "timeRequired": "0:1:0",
        "url": "https:\/\/stephenjamieson.info\/post\/smokeping-saucy\/"
    }
    </script>    
    
    <meta name="twitter:card" content="summary" />
    <meta property="og:type" content="article" />
    <meta property="og:article:published_time" content="2013-11-26T09:09:37-04:00" />
    <meta property="og:article:section" content="post" />
    
    
 
    
    
<meta name="mobile-web-app-capable" content="yes">


<meta name="apple-mobile-web-app-capable" content="yes"> 

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
<link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.0/material.cyan-indigo.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="/css/styles.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/default.min.css">

<style type="text/css">
body{
  
  background-color: #424242;
  
}
.main-container .minilogo{
  
  background-image: url('images/logo.jpg');
  
}
</style>    
    
  </head>
  <body>
    <div class="main-container mdl-layout mdl-js-layout has-drawer is-upgraded">
      <main class="mdl-layout__content">
      <div class="blog--blogpost">
        <div class="back">
          <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" href="https://stephenjamieson.info">
            <i class="material-icons">arrow_back</i>
          </a>
        </div>
        <div class="blog__posts mdl-grid">
          <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">
            <div class="mdl-card__media mdl-color-text--grey-50" >
              <h3>smokeping on saucy</h3>
            </div>
            <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">
              <div class="minilogo"></div>
              <div>
                <strong>Stephen Jamieson</strong>
                <time datetime="2013-11-26T09:09:37-04:00">
                    26 Nov 2013
                </time>
              </div>
              <div class="section-spacer"></div>
              <div class="share"></div>
            </div>
            <div class="mdl-color-text--grey-700 mdl-card__supporting-text content">
              

<p>For anyone attempting to run smokeping with nginx and fcgiwrap, there is a <a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=695438">major bug</a> in the package that ubuntu/debian provides.</p>

<h5 id="install-smokeping:1a610fc03acb1361c1fc1a239416a202">Install smokeping</h5>


apt-get --no-install-recommends install smokeping


<h5 id="install-fcgiwrap:1a610fc03acb1361c1fc1a239416a202">Install fcgiwrap</h5>


apt-get install fcgiwrap


<h5 id="in-your-nginx-site-config-add-the-cgi-configuration-for-fcgiwrap:1a610fc03acb1361c1fc1a239416a202">In your nginx site config, add the cgi configuration for fcgiwrap</h5>

<p><code>/etc/nginx/sites-enabled/yoursite</code>:</p>


location ~ \.cgi$ {
    fastcgi_intercept_errors  on;
    include                   fastcgi_params;
    fastcgi_pass              unix:/var/run/fcgiwrap.socket;
    fastcgi_param             SCRIPT_NAME           $fastcgi_script_name;
    fastcgi_param             SCRIPT_FILENAME       $document_root$fastcgi_script_name;}


<h5 id="in-your-nginx-site-config-add-a-smokeping-location-i-also-use-authentication-here:1a610fc03acb1361c1fc1a239416a202">In your nginx site config, add a smokeping location (I also use authentication here)</h5>

<p><code>/etc/nginx/sites-enabled/yoursite</code>:

location /smokeping {
    gzip                  off;
    index                 smokeping.cgi;
}
</p>

<h5 id="symlink-smokeping-folder-to-nginx-share:1a610fc03acb1361c1fc1a239416a202">Symlink smokeping folder to nginx share</h5>


ln -s /usr/share/smokeping/www /usr/share/nginx/html/smokeping


<h5 id="ignore-smokeping-fcgi-dist-and-symlink-the-correct-cgi-script:1a610fc03acb1361c1fc1a239416a202">Ignore smokeping.fcgi.dist and symlink the correct cgi script</h5>


ln -s /usr/lib/cgi-bin/smokeping.cgi /usr/share/nginx/html/smokeping/


<h5 id="edit-the-config-files-in-etc-smokeping-config-d-to-your-liking:1a610fc03acb1361c1fc1a239416a202">Edit the config files in /etc/smokeping/config.d to your liking</h5>

<p>Good luck!</p>

            </div>
          </div>
        </div>
      </div>

        <footer class="mdl-mini-footer">
          <div class="mdl-mini-footer--left-section">
            
            
            
          </div>
          <div class="mdl-mini-footer--right-section">
            
          </div>
        </footer>
      </main>
      <div class="mdl-layout__obfuscator"></div>
    </div>
    <script src="https://storage.googleapis.com/code.getmdl.io/1.0.0/material.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="/js/share.min.js"></script>
  </body>
  <script>
    Array.prototype.forEach.call(document.querySelectorAll('.mdl-card__media'), function(el) {
      var link = el.querySelector('a');
      if(!link) {
        return;
      }
      var target = link.getAttribute('href');
      if(!target) {
        return;
      }
      el.addEventListener('click', function() {
        location.href = target;
      });
    });
    
    $(function() {
      hljs.initHighlightingOnLoad();
    });
  </script>
  <script>
	
	$(function() {
		var config =
			{
				ui: {
					flyout: "middle left",
					button_text: "<i class='material-icons'>share</i>"
				}
		};
		var share = new Share(".share", config);
	});
</script>
</html>